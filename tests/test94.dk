# Test finalizers


proc foo {p} {
	puts "foo calling p: "
	puts [p]
	puts "foo done."
	return "foo return value"
} {
	puts "foo finalizer called."
}

proc bar {} {
	puts "Calling 'foo'."
	foo {} => {puts "bye!"; return "bar return value"}
	return 0
}

proc quux {p} {
	puts "ho hum"
	return "quux return value"
} {
	puts "Calling quux{p}:"
	p
}


foo {} => {puts "w00t!"}
puts "---"

puts [foo {} => {puts "y4h00!"; next "block return value"; value 42}]
puts "---"

puts [bar]
puts "---"

puts [quux {}=>{puts "y0"}]
puts "---"
